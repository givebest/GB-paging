!function(){function e(){if(!(this instanceof e))return new e}function a(e,a){return e?e.replace("{{n}}",a+"="):"#"+a+"="}function t(e,a,t){"function"==typeof addEventListener?e.addEventListener(a,t,!1):e.attachEvent&&e.attachEvent("on"+a,t)}function n(e,a){return!(!e||!a)&&(e.classList?e.classList.contains(a):e.className.match(new RegExp("(\\s|^)"+a+"(\\s|$)")))}function r(e,a){e.classList?e.classList.add(a):n(e,a)||(e.className+=""+a)}var i,s,g,c=null;s={eventType:"link",curPage:1,size:10,paramName:"p",prevText:"上一页",nextText:"下一页",pageInfo:"当前第<b>{{currentPage}}</b>页/共<b>{{totalPages}}</b>页"},i=function(e){return document.getElementById(e)},e.prototype.init=function(e){this.getParams(e),this.build(),this.events()},e.prototype.getParams=function(e){if(g=this.opts=e||{},i(g.eleId))g.container=i(g.eleId);else{if(!i("gbpaging"))return;g.container=i("gbpaging")}g.eventType=g.eventType||s.eventType,g.total=g.total||0,g.curPage=g.curPage||s.curPage,g.size=g.size||s.size,g.paramName=g.paramName||s.paramName,g.goUrl=g.goUrl||"",g.pages=Math.ceil(g.total/g.size||0),g.isPrev=g.prevText!==!1,g.prevText=g.prevText||s.prevText,g.isNext=g.nextText!==!1,g.nextText=g.nextText||s.nextText,g.isPageInfo=g.pageInfo!==!1,g.pageInfo=g.pageInfo||s.pageInfo},e.prototype.build=function(){var e=[];if(g.pages<=1)return void r(g.container,"gb-hide");if(!(g.curPage>>>0<=0)){var t=1==g.curPage||g.curPage==g.pages?3:2,n=a(g.goUrl,g.paramName);e.push('<a href="'+n+g.curPage+'" class="gb-paging-current">'+g.curPage+"</a>");for(var i=1;i<t;i++)g.curPage-i>1&&e.unshift('<a href="'+n+(g.curPage-i)+'">'+(g.curPage-i)+"</a>"),g.curPage+i<g.pages&&e.push('<a href="'+n+(g.curPage+i)+'">'+(g.curPage+i)+"</a>");g.curPage-2>1&&e.unshift('<span class="gb-paging-ellipsis">...</span>'),g.curPage>1?(e.unshift('<a href="'+n+'1">1</a>'),g.isPrev&&e.unshift('<a href="'+n+(g.curPage-1)+'">'+g.prevText+"</a>")):g.isPrev&&e.unshift('<a class="disabled">'+g.prevText+"</a>"),g.curPage+2<g.pages&&e.push('<span class="gb-paging-ellipsis">...</span>'),g.curPage<g.pages?(e.push('<a href="'+n+g.pages+'">'+g.pages+"</a>"),g.isNext&&e.push('<a href="'+n+(g.curPage+1)+'">'+g.nextText+"</a>")):g.isNext&&e.push('<a class="disabled">'+g.nextText+"</a>"),g.isPageInfo&&e.push('<div class="gb-paging-info">'+g.pageInfo.replace("{{currentPage}}",g.curPage).replace("{{totalPages}}",g.pages)+"</div>"),g.container.innerHTML=e.join("")}},e.prototype.events=function(){var e=this;"click"===g.eventType&&t(g.container,"click",function(t){t=t||window.event,t.preventDefault?t.preventDefault():t.returnValue=!1,g=e.opts;var r=t.target||t.srcElement;"a"!==r.tagName.toLowerCase()||n(r,"disabled")||(g.curPage=r.getAttribute("href").replace(a(g.goUrl,g.paramName),""),g.curPage>>>0===0&&(g.curPage=g.curPage.replace(window.location.href,"")),g.curPage=parseInt(g.curPage),e.build())})},void 0===window.gbPaging&&(window.gbPaging=function(a){return c=e(),c.init(a)}),"function"==typeof define&&define.amd&&define("GB-paging",[],function(){return gbPaging})}();